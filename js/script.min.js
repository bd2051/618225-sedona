var popup=document.querySelector(".modal-motel-search"),btn=document.querySelector(".js-motel-search-button"),form=popup.querySelector(".search-form"),arival=popup.querySelector("[name=search-arival-date]"),departure=popup.querySelector("[name=search-departure-date]"),persons=popup.querySelector("[name=search-persons]"),child=popup.querySelector("[name=search-child]"),isStorageSupport=!0,storagepersons="",storagechild="",hiddenmap=document.querySelector(".sedona-map img"),modalmap=document.querySelector(".sedona-map iframe");try{storagepersons=localStorage.getItem("persons"),storagechild=localStorage.getItem("child",child.value)}catch(e){isStorageSupport=!1}popup.classList.add("js-modal-hide"),hiddenmap.classList.add("js-modal-hide"),modalmap.classList.remove("js-modal-hide"),btn.addEventListener("click",function(e){e.preventDefault(),popup.classList.toggle("js-modal-show"),popup.classList.remove("js-modal-error"),arival.focus(),storagepersons&&(persons.value=storagepersons),storagechild&&(child.value=storagechild)}),form.addEventListener("submit",function(e){persons.value&&child.value&&arival.value&&departure.value?isStorageSupport&&(localStorage.setItem("persons",persons.value),localStorage.setItem("child",child.value)):(e.preventDefault(),console.log("Нужно ввести логин и пароль"),popup.classList.remove("js-modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("js-modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("js-modal-show")&&(popup.classList.remove("js-modal-show"),popup.classList.remove("js-modal-error")))});